<xml xmlns="https://developers.google.com/blockly/xml"><variables></variables><block type="pxt-on-start" id="{NPB%;u]fw+f2]XW_kxT" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="`nAk?d19*dJSW_MbL[`1"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="namespace VerticalCompass {" line1="    /**" line2="     * XとZの地磁気から方角（0:東, 1:北, 2:西, 3:南）を返す" line3="     */" line4="    //% block" line5="    export function getDirection(magX: number, magZ: number): number {" line6="        let angle = getVAngle(magX, magZ)" line7="        let dir = 0" line8="        if (angle &lt; 45 || angle &gt;= 315) {" line9="            dir = 0" line10="        } else if (angle &lt; 135) {" line11="            dir = 1" line12="        } else if (angle &lt; 225) {" line13="            dir = 2" line14="        } else {" line15="            dir = 3" line16="        }" line17="        return dir" line18="    }" line19="" line20="    function getVAngle(magX: number, magZ: number): number {" line21="        let angle2 = Math.atan2(magZ, magX) * 180 / Math.PI" line22="        if (angle2 &lt; 0) {" line23="            angle2 += 360" line24="        }" line25="        return Math.round(angle2)" line26="    }" line27="}" numlines="28"></mutation></block></statement></block></xml>